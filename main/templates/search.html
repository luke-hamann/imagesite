{% extends '_base.html' %}

{% block title %}Image Site{% endblock %}

{% block content %}
    <div class="limit-width">
        <h1 class="heading center">
            Image Site
        </h1>
        <form action="." method="get">
            <input type="search" name="q" value="{{ query }}" autocomplete="off"
                placeholder="Search" class="search-box" autofocus />
        </form>
        <div class="content">
            <span>Page:</span>
            {% for i in page.paginator.page_range %}
                <a href="?q={{ query }}&p={{ i }}" class="button">
                    {{ i }}
                </a>
            {% endfor %}
        </div>
        <div class="search-result-list">
            {% for image in images %}
                <div class="search-result">
                    <a href="{% url 'detail' image.id image.slug %}">
                        <img src="{% url 'image' image.id %}?format=thumbnail"
                            loading="lazy" class="search-result-image" /></a>
                    <div class="search-result-description">
                        <div>
                            <a href="{% url 'detail' image.id image.slug %}">
                                {{ image.title }}
                            </a>
                        </div>
                        <div>
                            {% for tag in image.tags.all %}
                                <a href="?q={{ tag.name }}">{{ tag.name }}</a>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
        <div class="content">
            <span>Page:</span>
            {% for i in page.paginator.page_range %}
                <a href="?q={{ query }}&p={{ i }}" class="button">
                    {{ i }}
                </a>
            {% endfor %}
        </div>
    </div>
{% endblock %}
